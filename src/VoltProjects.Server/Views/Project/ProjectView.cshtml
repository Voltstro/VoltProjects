@model VoltProjects.Server.Models.View.ProjectViewModel

@{
    ViewBag.Title = $"{Model.ProjectPage.Title} - {Model.ProjectPage.ProjectVersion.Project.Name}";
    ViewBag.Description = Model.ProjectPage.Description;
}

@section NavbarSecond
{
    <partial name="ProjectNav" model="Model.ProjectNavModel"/>
}

<div class="container layout @(Model.ProjectPage is { Aside: true } ? "layout-article" : "") @(Model.ProjectPage.Aside && Model.Toc == null ? "layout-aside" : "")">
    @if (Model.Toc != null)
    {
        <partial name="Shared/ProjectToc" model="Model.Toc"/>
    }
    
    <article>
        @if (Model.ProjectPage.TitleDisplay)
        {
            <h1>@Model.ProjectPage.Title</h1>
            
            <ul class="metabar">
                <li>
                    <time datetime="@Model.ProjectPage.PublishedDate.ToString("yyyy-MM-dd")">@Model.ProjectPage.PublishedDate.ToString("yyyy-MM-dd")</time>
                </li>
                <li>
                    @if (Model.ProjectPage.WordCount > 400)
                    {
                        <span>@((int)Math.Round(Model.ProjectPage.WordCount.Value / 200f, 0)) minutes to read</span>
                    }
                    else
                    {
                        <span>2 minutes to read</span>
                    }
                </li>
            </ul>
        }
        <!-- Project Page Content -->
        @Html.Raw(Model.ProjectPage.Content)
    </article>
    
    @if (Model.ProjectPage.Aside)
    {
        <aside>
            <div class="sticky-top">
                <nav id="in-this-article" class="in-this-article"></nav>
            </div>
        </aside>
    }
</div>

